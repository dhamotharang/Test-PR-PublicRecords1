export FlattenFile (DATASET(Layout_BuildFax.output_rec) l) := FUNCTION

Layout_BuildFax.output_rec_flat_seq FlattenIt (recordof(l) le, integer c) := TRANSFORM
self.record_sequence := (string) c,
self.prop_id := le.property.id,
self.prop_recnum := le.property.recnum,
self.prop_raddress1 := le.property.raddress1,
self.prop_raddress2 := le.property.raddress2,
self.prop_rcity := le.property.rcity,
self.prop_rstate := le.property.rstate,
self.prop_rzip := le.property.rzip,
self.prop_prim_range := le.property.prim_range,
self.prop_predir := le.property.predir,
self.prop_prim_name := le.property.prim_name,
self.prop_addr_suffix := le.property.addr_suffix,
self.prop_postdir := le.property.postdir,
self.prop_unit_desig := le.property.unit_desig,
self.prop_sec_range := le.property.sec_range,
self.prop_city := le.property.city,
self.prop_st := le.property.st,
self.prop_zip := le.property.zip,
self.prop_zip4 := le.property.zip4,
self.prop_capassnumber := le.property.capassnumber,
self.prop_yearbuilt := le.property.yearbuilt,
self.contr_id := le.contractor.id,
self.contr_recnum := le.contractor.recnum,
self.contr_prim_range := le.contractor.prim_range,
self.contr_predir := le.contractor.predir,
self.contr_prim_name := le.contractor.prim_name,
self.contr_addr_suffix := le.contractor.addr_suffix,
self.contr_postdir := le.contractor.postdir,
self.contr_unit_desig := le.contractor.unit_desig,
self.contr_sec_range := le.contractor.sec_range,
self.contr_city := le.contractor.city,
self.contr_st := le.contractor.st,
self.contr_zip := le.contractor.zip,
self.contr_zip4 := le.contractor.zip4,
self.corr_id := le.correction.id,
self.corr_propertyid := le.correction.propertyid,
self.corr_recnum := le.correction.recnum,
self.corr_propertyrecnum := le.correction.propertyrecnum,
self.corr_capassnumber := le.correction.capassnumber,
self.corr_prim_range := le.correction.prim_range,
self.corr_predir := le.correction.predir,
self.corr_prim_name := le.correction.prim_name,
self.corr_addr_suffix := le.correction.addr_suffix,
self.corr_postdir := le.correction.postdir,
self.corr_unit_desig := le.correction.unit_desig,
self.corr_sec_range := le.correction.sec_range,
self.corr_city := le.correction.city,
self.corr_st := le.correction.st,
self.corr_zip := le.correction.zip,
self.corr_zip4 := le.correction.zip4,
self.inspect_id := le.inspection.id,
self.inspect_permitid := le.inspection.permitid,
self.inspect_recnum := le.inspection.recnum,
self.inspect_permitrecnum := le.inspection.permitrecnum,
self.perm_id := le.permit.id,
self.perm_propertyid := le.permit.propertyid,
self.perm_recnum := le.permit.recnum,
self.perm_propertyrecnum := le.permit.propertyrecnum,
self.perm_jurisdiction := le.permit.jurisdiction,
self.perm_preferreddate := le.permit.preferreddate,
self.pc_id := le.permitcontractor.id,
self.pc_permitid := le.permitcontractor.permitid,
self.pc_recnum := le.permitcontractor.recnum,
self.pc_permitrecnum := le.permitcontractor.permitrecnum,
self.juris_jurisdiction := le.jurisdiction.jurisdiction,
self.juris_preferreddate := le.jurisdiction.preferreddate,
self.juris_city := le.jurisdiction.city,
self.juris_zip := le.jurisdiction.zip,
self.roofyear := (string) le.input.roofyear,
self.yearbuilt := (string) le.input.yearbuilt,
self.addr_city := le.address.city,
self.addr_st := le.address.st,
self.addr_zip := le.address.zip,
self.calc_id := le.calculation.id,
self.new_constr_update_date := le.calculation.new_constr.update_date,
self.new_constr_age := le.calculation.new_constr.age,
self.new_constr_not_update_since := le.calculation.new_constr.not_update_since,
self.rem_update_date := le.calculation.rem.update_date,
self.rem_age := le.calculation.rem.age,
self.rem_not_update_since := le.calculation.rem.not_update_since,
self.bldg_update_date := le.calculation.bldg.update_date,
self.bldg_age := le.calculation.bldg.age,
self.bldg_not_update_since := le.calculation.bldg.not_update_since,
self.elect_update_date := le.calculation.elect.update_date,
self.elect_age := le.calculation.elect.age,
self.elect_not_update_since := le.calculation.elect.not_update_since,
self.mech_update_date := le.calculation.mech.update_date,
self.mech_age := le.calculation.mech.age,
self.mech_not_update_since := le.calculation.mech.not_update_since,
self.plumb_update_date := le.calculation.plumb.update_date,
self.plumb_age := le.calculation.plumb.age,
self.plumb_not_update_since := le.calculation.plumb.not_update_since,
self.other_update_date := le.calculation.other.update_date,
self.other_age := le.calculation.other.age,
self.other_not_update_since := le.calculation.other.not_update_since,
self.roof_update_date := le.calculation.roof.update_date,
self.roof_age := le.calculation.roof.age,
self.roof_not_update_since := le.calculation.roof.not_update_since,
self.pool_update_date := le.calculation.pool.update_date,
self.pool_age := le.calculation.pool.age,
self.pool_not_update_since := le.calculation.pool.not_update_since,
self.demol_update_date := le.calculation.demol.update_date,
self.demol_age := le.calculation.demol.age,
self.demol_not_update_since := le.calculation.demol.not_update_since,
self.repair_update_date := le.calculation.repair.update_date,
self.repair_age := le.calculation.repair.age,
self.repair_not_update_since := le.calculation.repair.not_update_since,
self.wind_prevent_update_date := le.calculation.wind_prevent.update_date,
self.wind_prevent_age := le.calculation.wind_prevent.age,
self.wind_prevent_not_update_since := le.calculation.wind_prevent.not_update_since,
self.seismic_update_date := le.calculation.seismic.update_date,
self.seismic_age := le.calculation.seismic.age,
self.seismic_not_update_since := le.calculation.seismic.not_update_since,
self.solar_update_date := le.calculation.solar.update_date,
self.solar_age := le.calculation.solar.age,
self.solar_not_update_since := le.calculation.solar.not_update_since,
self.sprinkler_update_date := le.calculation.sprinkler.update_date,
self.sprinkler_age := le.calculation.sprinkler.age,
self.sprinkler_not_update_since := le.calculation.sprinkler.not_update_since,
self.firealrm_update_date := le.calculation.firealrm.update_date,
self.firealrm_age := le.calculation.firealrm.age,
self.firealrm_not_update_since := le.calculation.firealrm.not_update_since,
self.security_update_date := le.calculation.security.update_date,
self.security_age := le.calculation.security.age,
self.security_not_update_since := le.calculation.security.not_update_since,
self.change_use_update_date := le.calculation.change_use.update_date,
self.change_use_age := le.calculation.change_use.age,
self.change_use_not_update_since := le.calculation.change_use.not_update_since,
self.water_update_date := le.calculation.water.update_date,
self.water_age := le.calculation.water.age,
self.water_not_update_since := le.calculation.water.not_update_since,
self.wind_update_date := le.calculation.wind.update_date,
self.wind_age := le.calculation.wind.age,
self.wind_not_update_since := le.calculation.wind.not_update_since,
self.fire_update_date := le.calculation.fire.update_date,
self.fire_age := le.calculation.fire.age,
self.fire_not_update_since := le.calculation.fire.not_update_since,
self.pest_update_date := le.calculation.pest.update_date,
self.pest_age := le.calculation.pest.age,
self.pest_not_update_since := le.calculation.pest.not_update_since,
self.natdisast_update_date := le.calculation.natdisast.update_date,
self.natdisast_age := le.calculation.natdisast.age,
self.natdisast_not_update_since := le.calculation.natdisast.not_update_since,
self.mobilehm_update_date := le.calculation.mobilehm.update_date,
self.mobilehm_age := le.calculation.mobilehm.age,
self.mobilehm_not_update_since := le.calculation.mobilehm.not_update_since,
self.tank_update_date := le.calculation.tank.update_date,
self.tank_age := le.calculation.tank.age,
self.tank_not_update_since := le.calculation.tank.not_update_since,
self.new_comm_update_date := le.calculation.new_comm.update_date,
self.new_comm_age := le.calculation.new_comm.age,
self.new_comm_not_update_since := le.calculation.new_comm.not_update_since,
self.new_ind_update_date := le.calculation.new_ind.update_date,
self.new_ind_age := le.calculation.new_ind.age,
self.new_ind_not_update_since := le.calculation.new_ind.not_update_since,
self.new_rtl_update_date := le.calculation.new_rtl.update_date,
self.new_rtl_age := le.calculation.new_rtl.age,
self.new_rtl_not_update_since := le.calculation.new_rtl.not_update_since,
self.new_wrhse_update_date := le.calculation.new_wrhse.update_date,
self.new_wrhse_age := le.calculation.new_wrhse.age,
self.new_wrhse_not_update_since := le.calculation.new_wrhse.not_update_since,
self.new_office_update_date := le.calculation.new_office.update_date,
self.new_office_age := le.calculation.new_office.age,
self.new_office_not_update_since := le.calculation.new_office.not_update_since,
self.new_multi_update_date := le.calculation.new_multi.update_date,
self.new_multi_age := le.calculation.new_multi.age,
self.new_multi_not_update_since := le.calculation.new_multi.not_update_since,
self := le.input,
self := le.address,
self := le.input,
self := le.property,
self := le.contractor,
self := le.correction,
self := le.inspection,
self := le.permit,
self := le.permitcontractor,
self := le.jurisdiction,
self := le.calculation,
self := le,
end;

return  PROJECT(l,FlattenIt(LEFT,COUNTER));
END;