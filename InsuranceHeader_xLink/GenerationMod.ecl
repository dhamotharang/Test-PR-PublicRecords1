// Machine-readable versions of the spec file and subsets thereof
IMPORT SALT311;
EXPORT GenerationMod := MODULE(SALT311.iGenerationMod)
 
  // SALT Version info
  EXPORT salt_VERSION := 'V3.11.10-PV1';
  EXPORT salt_MODULE := 'SALT311'; // Optional override by HACK:SALTMODULE
  EXPORT salt_TOOLSMODULE := 'SALTTOOLS30'; // Optional override by HACK:SALTTOOLSMODULE
 
  // Core module configuration values
  EXPORT spc_MODULE := 'InsuranceHeader_xLink';
  EXPORT spc_NAMESCOPE := '';
  EXPORT spc_PROCESS := 'xIDL';
  EXPORT spc_PROCLAYOUTS := 'Process_xIDL_Layouts()';
  EXPORT spc_IDNAME := 'DID'; // cluster id (input)
  EXPORT spc_IDFIELD := 'DID'; // cluster id (output)
  EXPORT spc_RIDFIELD := 'RID'; // record id
  EXPORT spc_CONFIG := 'Config';
  EXPORT spc_CONFIGPARAM := FALSE;
  EXPORT spc_SOURCEFIELD := 'SRC';
  EXPORT spc_FILEPREFIX := 'File_';
  EXPORT spc_FILENAME := 'InsuranceHeader';
  EXPORT spc_INGESTSTATUS := '';
  EXPORT spc_EXTERNAL_MAPPING := 'UniqueID:RID,ZIP_cases:ZIP';
  EXPORT spc_EXTERNAL_BATCH_PARAM := ',/* MY_DID */,SNAME,FNAME,MNAME,LNAME,DERIVED_GENDER,PRIM_RANGE,PRIM_NAME,SEC_RANGE,CITY,ST,ZIP_cases,SSN5,SSN4,DOB,PHONE,DL_STATE,DL_NBR,SRC,SOURCE_RID,DT_FIRST_SEEN,DT_LAST_SEEN,DT_EFFECTIVE_FIRST,DT_EFFECTIVE_LAST,MAINNAME,FULLNAME,ADDR1,LOCALE,ADDRESS,fname2,lname2,VIN';
  EXPORT spc_HAS_TWOSTEP := TRUE;
  EXPORT spc_HAS_PARTITION := FALSE;
  EXPORT spc_HAS_FIELDTYPES := TRUE;
  EXPORT spc_HAS_INCREMENTAL := TRUE;
  EXPORT spc_HAS_ASOF := FALSE;
  EXPORT spc_HAS_NONCONTIGUOUS := FALSE;
  EXPORT spc_HAS_SUPERFILES := FALSE;
  EXPORT spc_HAS_CONSISTENT := FALSE;
  EXPORT spc_HAS_EXTERNAL := FALSE;
  EXPORT spc_HAS_PARENTS := FALSE;
  EXPORT spc_HAS_FORCE := TRUE;
  EXPORT spc_HAS_BLOCKLINK := FALSE;
 
  // The entire spec file
  EXPORT spcString :=
    'OPTIONS:-ma -gs2\n'
    + 'FILENAME:InsuranceHeader\n'
    + 'IDNAME:DID\n'
    + 'IDFIELD:EXISTS:DID\n'
    + 'RIDFIELD:RID\n'
    + 'MODULE:InsuranceHeader_xLink\n'
    + 'RECORDS:11000000000\n'
    + 'POPULATION:1400000000\n'
    + 'NINES:3\n'
    + 'PROCESS:xIDL:UBER(NEVER)\n'
    + 'FIELDTYPE:DEFAULT:LEFTTRIM:NOQUOTES("\'):ONFAIL(CLEAN):\n'
    + 'FIELDTYPE:NUMBER:ALLOW(0123456789):\n'
    + '// FUZZY\n'
    + 'FUZZY:PreferredName:RST:CUSTOM(fn_PreferredName):TYPE(STRING20)\n'
    + 'FIELD:SNAME:PROP:6,54\n'
    + 'FIELD:FNAME:TYPE(STRING20):INITIAL:PHONETIC:EDIT1:PreferredName:WEIGHT(0.8):WILD:9,263\n'
    + 'FIELD:MNAME:TYPE(STRING20):INITIAL:PROP:EDIT2:WEIGHT(0.8):8,228\n'
    + 'FIELD:LNAME:TYPE(STRING28):PHONETIC:EDIT1:HYPHEN2:WEIGHT(0.8):WILD:11,383\n'
    + 'FIELD:DERIVED_GENDER:PROP:INITIAL:1,17\n'
    + '//Address\n'
    + 'FIELD:PRIM_RANGE:TYPE(STRING10):EDIT1:WILD:11,463\n'
    + 'FIELD:PRIM_NAME:TYPE(STRING28):EDIT1:WILD:11,469\n'
    + 'FIELD:SEC_RANGE:TYPE(STRING8):CONTEXT(PRIM_NAME):HYPHEN2:8,371\n'
    + 'FIELD:CITY:TYPE(STRING25):CONTEXT(ST):10,420\n'
    + 'FIELD:ST:TYPE(STRING2):5,310\n'
    + 'FIELD:ZIP:TYPE(STRING5):LIKE(NUMBER):MULTIPLE:WEIGHTED:KEEP(1):14,0\n'
    + 'FIELD:SSN5:TYPE(STRING5):PROP:EDIT1:15,127\n'
    + 'FIELD:SSN4:TYPE(STRING4):PROP:EDIT1:13,134\n'
    + 'DATEFIELD:DOB:SOFT1(4.0):YEARSHIFT13(4.0):MDDM:PROP:FORCE(GENERATION,--3,OR(SSN5),OR(SSN4)):15,0\n'
    + 'FIELD:PHONE:TYPE(STRING10):LIKE(NUMBER):WEIGHT(0.5):PROP:21,420\n'
    + 'FIELD:DL_STATE:TYPE(STRING2):9,25\n'
    + 'FIELD:DL_NBR:CONTEXT(DL_STATE):EDIT1:PROP:23,124\n'
    + '// Source\n'
    + 'FIELD:SRC:TYPE(STRING9):PROP:3,717\n'
    + 'SOURCEFIELD:SRC\n'
    + 'FIELD:SOURCE_RID:CONTEXT(SRC):23,1000\n'
    + 'FIELD:DT_FIRST_SEEN:RECORDDATE(FIRST):7,732\n'
    + 'FIELD:DT_LAST_SEEN:RECORDDATE(LAST):2,828\n'
    + '// RANGEFIELD:ReportedDate:RANGE(dt_first_seen,dt_last_seen):3,896\n'
    + 'FIELD:DT_EFFECTIVE_FIRST:RECORDDATE(FIRST):0,0\n'
    + 'FIELD:DT_EFFECTIVE_LAST:RECORDDATE(LAST):0,0\n'
    + 'INCREMENTAL:EFFECTIVEDATES(DT_EFFECTIVE_FIRST,DT_EFFECTIVE_LAST)\n'
    + '// Concept\n'
    + 'CONCEPT:MAINNAME:FNAME:MNAME:LNAME:BAGOFWORDS:SCALE(NEVER):22,691\n'
    + 'CONCEPT:FULLNAME:MAINNAME:SNAME:SCALE(NEVER):22,529\n'
    + 'CONCEPT:ADDR1:PRIM_RANGE:SEC_RANGE:PRIM_NAME:18,576\n'
    + 'CONCEPT:LOCALE:CITY:ST:ZIP:14,481\n'
    + 'CONCEPT:ADDRESS:ADDR1:LOCALE:30,601\n'
    + '//HACK:MATCHCODE\n'
    + 'ATTRIBUTEFILE:RES:NAMED(Relatives):VALUES(fname2:lname2):IDFIELD(DID):19,900\n'
    + 'ATTRIBUTEFILE:VINATTR:NAMED(VehicleID):VALUES(VIN):IDFIELD(DID):29,812\n'
    + 'HACK:KEYPREFIX\n'
    + 'HACK:KEYINFIX\n'
    + 'HACK:KEYSUPERFILE\n'
    + 'HACK:MAXBLOCKSIZE:5000,5000\n'
    + 'HACK:INC_LP_EXACT \n'
    + 'LINKPATH:NAME:FNAME:LNAME:ST:?:DERIVED_GENDER:SNAME:MNAME:SSN5:SSN4:+:PRIM_RANGE:PRIM_NAME:SEC_RANGE:CITY:DOB:MAXBLOCKSIZE(500,500)\n'
    + 'LINKPATH:ADDRESS:PRIM_RANGE:PRIM_NAME:ZIP:?:SEC_RANGE:MAINNAME:+:CITY:ST:DERIVED_GENDER:SNAME:DOB\n'
    + 'LINKPATH:SSN:SSN5:SSN4:?:MAINNAME:+:CITY:ST:DERIVED_GENDER:SNAME:DOB\n'
    + 'LINKPATH:SSN4:SSN4:FNAME:LNAME(NOFUZZY):+:DOB:SSN5:DERIVED_GENDER:SNAME\n'
    + 'LINKPATH:DOB:DOB:LNAME:?:FNAME:MNAME:+:ST:CITY:SSN5:SSN4:DERIVED_GENDER:DL_NBR:DL_STATE:SNAME\n'
    + 'LINKPATH:DOBF:DOB:FNAME:?:LNAME:MNAME:+:ST:CITY:SSN5:SSN4:DERIVED_GENDER:DL_NBR:DL_STATE:SNAME\n'
    + 'LINKPATH:ZIP_PR:ZIP:PRIM_RANGE:?:FNAME:LNAME:+:PRIM_NAME:SEC_RANGE:CITY:ST:DERIVED_GENDER:SNAME:DOB\n'
    + 'LINKPATH:SRC_RID:SRC:SOURCE_RID:FNAME:DOB:CITY:DERIVED_GENDER:SNAME\n'
    + 'LINKPATH:DLN:DL_NBR:DL_STATE:?:MAINNAME:+:SSN5:SSN4:DERIVED_GENDER:SNAME:DOB\n'
    + 'LINKPATH:PH:PHONE:?:MAINNAME:DOB:+:CITY:ST:SSN5:SSN4\n'
    + 'LINKPATH:LFZ:LNAME:FNAME:ZIP:+:CITY:PRIM_RANGE:PRIM_NAME:SSN5:SSN4:MNAME:SEC_RANGE:SNAME:DOB\n'
    + 'LINKPATH:RELATIVE:fname2:lname2:?:FNAME:LNAME\n'
    + 'LINKPATH:VIN:VIN:?:FNAME\n'
    ;
 
  // Structured values
  EXPORT linkpaths := DATASET([
    {'NAME','FNAME,LNAME,ST','DERIVED_GENDER,SNAME,MNAME,SSN5,SSN4','PRIM_RANGE,PRIM_NAME,SEC_RANGE,CITY,DOB','',''}
    ,{'ADDRESS','PRIM_RANGE,PRIM_NAME,ZIP','SEC_RANGE,MAINNAME','CITY,ST,DERIVED_GENDER,SNAME,DOB','',''}
    ,{'SSN','SSN5,SSN4','MAINNAME','CITY,ST,DERIVED_GENDER,SNAME,DOB','',''}
    ,{'SSN4','SSN4,FNAME,LNAME(NOFUZZY)','','DOB,SSN5,DERIVED_GENDER,SNAME','',''}
    ,{'DOB','DOB,LNAME','FNAME,MNAME','ST,CITY,SSN5,SSN4,DERIVED_GENDER,DL_NBR,DL_STATE,SNAME','',''}
    ,{'DOBF','DOB,FNAME','LNAME,MNAME','ST,CITY,SSN5,SSN4,DERIVED_GENDER,DL_NBR,DL_STATE,SNAME','',''}
    ,{'ZIP_PR','ZIP,PRIM_RANGE','FNAME,LNAME','PRIM_NAME,SEC_RANGE,CITY,ST,DERIVED_GENDER,SNAME,DOB','',''}
    ,{'SRC_RID','SRC,SOURCE_RID','FNAME,DOB,CITY,DERIVED_GENDER,SNAME','ST','',''}
    ,{'DLN','DL_NBR,DL_STATE','MAINNAME','SSN5,SSN4,DERIVED_GENDER,SNAME,DOB','',''}
    ,{'PH','PHONE','MAINNAME,DOB','CITY,ST,SSN5,SSN4','',''}
    ,{'LFZ','LNAME,FNAME,ZIP','','CITY,PRIM_RANGE,PRIM_NAME,SSN5,SSN4,MNAME,SEC_RANGE,SNAME,DOB,ST','',''}
    ,{'RELATIVE','Basis,Basis','FNAME,LNAME','','',''}
    ,{'VIN','Basis','FNAME','','',''}
    ],{STRING linkpath;STRING compulsory;STRING optional;STRING bonus;STRING required;STRING search});
 
END;

