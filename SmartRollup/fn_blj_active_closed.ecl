//default type to B=Bankruptcy, others include L=Liens, J=Judgements, U=Ucc.
IMPORT iesp;
export fn_blj_active_closed (string1 inType = 'B', string50 inDisposition, string50 inRecordType):= function
 
	dispositionActiveSet :=['',
													'CASE TRANSFERRED OUT OF DIST',
													'CASE TRANSFERRED WITHIN DIST',
													'DISCHARGE DENIED',
													'DISCHARGE NA',
													'DISCHARGE NOT APPLICABLE',
													'DISCHARGE WAIVEDREVOKED',
													'DISCHARGE DENIED',
													'DISCHARGE NOT APPLICABLE',
													'DISCHARGE NOT APPLICABLE',
													'TRANSFERRED OUT OF DISTRICT',
													'DISCHARGE NA',
													'DISCHARGE DENIED',
													'DISCHARGE NOT APPLICABLE',
													'DISCHARGE WAIVEDREVOKED',
													'TRANSFERRED TO ANOTHER DIST'
												 ];
	recordTypeActiveSet := ['CHAPTER',
													'CHAPTER 0',
													'CHAPTER 03',
													'CHAPTER 07',
													'CHAPTER 08',
													'CHAPTER 09',
													'CHAPTER 11',
													'CHAPTER 11 DISCHARGE NA',
													'CHAPTER 11 DISCHARGE NA',
													'CHAPTER 11 DISCHARGE NOT APPLICABLE',
													'CHAPTER 12',
													'CHAPTER 12 DISCHARGE NA',
													'CHAPTER 13',
													'CHAPTER 13 CASE TRANSFERRED OUT OF DIST',
													'CHAPTER 13 DISCHARGE DENIED',
													'CHAPTER 13 DISCHARGE NA',
													'CHAPTER 13 DISCHARGE NA',
													'CHAPTER 13 DISCHARGE NOT APPLICABLE',
													'CHAPTER 30',
													'CHAPTER 7',
													'CHAPTER 7 CASE TRANSFERRED OUT OF DIST',
													'CHAPTER 7 CASE TRANSFERRED WITHIN DIST',
													'CHAPTER 7 DISCHARGE DENIED',
													'CHAPTER 7 DISCHARGE NA',
													'CHAPTER 7 DISCHARGE NA',
													'CHAPTER 7 DISCHARGE NOT APPLICABLE',
													'CHAPTER 7 DISCHARGE WAIVEDREVOKED',
													'CHAPTER 7 TRANSFERRED OUT OF DISTRICT',
													'CHAPTER 7 TRANSFERRED TO ANOTHER DIST',
													'CHAPTER 9',
													'CHAPTER 9 DISCHARGE NA',
													'CHAPTER 99',
													'CHAPTER AD',
													'SECTION 304',
													'SECTION 304 DISCHARGE NA',
													'SECTION 304 DISCHARGE NOT APPLICABLE'
                          ];

	dispositionClosedSet := ['CASE DISMISSED',
													'CLOSED',
													'DISCHARGE GRANTED',
													'DISCHARGE GRANTED',
													'DISCHARGED',
													'DISMISSED',
													'DISPOSED',
													'FOR CASES ENTERED IN ERROR ONLY',
													'TERMINATED',
													'DISCHARGE GRANTED',
													'COURT USED ONLY',
													'PETITION DISMISSED',
													'PETITION DISMISSED'
                          ];
	recordTypeClosedSet :=  ['',
													'CHAPTER CLOSED',
													'CHAPTER DISCHARGED',
													'CHAPTER 0 DISCHARGED',
													'CHAPTER 0 DISMISSED',
													'CHAPTER 07 CLOSED',
													'CHAPTER 07 DISCHARGED',
													'CHAPTER 07 DISMISSED',
													'CHAPTER 09 DISCHARGED',
													'CHAPTER 11 CASE DISMISSED',
													'CHAPTER 11 CASE TRANSFERRED OUT OF DIST.',
													'CHAPTER 11 CLOSED',
													'CHAPTER 11 DISCHARGE GRANTED',
													'CHAPTER 11 DISCHARGED',
													'CHAPTER 11 DISMISSED',
													'CHAPTER 11 FOR CASES ENTERED IN ERROR ONLY',
													'CHAPTER 11 TERMINATED',
													'CHAPTER 12 CASE DISMISSED',
													'CHAPTER 12 CLOSED',
													'CHAPTER 12 DISCHARGED',
													'CHAPTER 12 DISMISSED',
													'CHAPTER 12 DISPOSED',
													'CHAPTER 12 TERMINATED',
													'CHAPTER 13 CASE DISMISSED',
													'CHAPTER 13 CLOSED',
													'CHAPTER 13 DISCHARGE GRANTED',
													'CHAPTER 13 DISCHARGED',
													'CHAPTER 13 DISMISSED',
													'CHAPTER 13 DISPOSED',
													'CHAPTER 13 FOR CASES ENTERED IN ERROR ONLY',
													'CHAPTER 13 TERMINATED',
													'CHAPTER 7 CASE DISMISSED',
													'CHAPTER 7 CLOSED',
													'CHAPTER 7 DISCHARGE GRANTED',
													'CHAPTER 7 DISCHARGED',
													'CHAPTER 7 DISMISSED',
													'CHAPTER 7 DISPOSED',
													'CHAPTER 7 FOR CASES ENTERED IN ERROR ONLY',
													'CHAPTER 7 TERMINATED',
													'CHAPTER 9 DISCHARGED',
													'CHAPTER 9 DISMISSED',
													'CHAPTER 99 CASE DISMISSED',
													'CHAPTER 99 DISMISSED',
													'SECTION 304 CASE DISMISSED',
													'SECTION 304 DISCHARGED',
													'SECTION 304 DISMISSED',
													'CHAPTER 11 PETITION DISMISSED',
													'CHAPTER 13 PETITION DISMISSED',
													'CHAPTER 7 COURT USED ONLY',
													'CHAPTER 7 PETITION DISMISSED'
                          ];
 	upperType := StringLib.StringToUpperCase(inType);
	upperInDisp := StringLib.StringToUpperCase(stringlib.stringfilterout(inDisposition,'./'));
	upperInRecType := StringLib.StringToUpperCase(stringlib.stringfilterout(inRecordType,'./'));
  isActiveClosed := map(upperType = 'B' => 
	                     map(upperInDisp in dispositionActiveSet or
											     upperInRecType in recordTypeActiveSet => iesp.Constants.SMART.ACTIVE,
	                         upperInDisp in dispositionClosedSet or
											     upperInRecType in recordTypeClosedSet => iesp.Constants.SMART.CLOSED,
												 ''),
	                  '');
  return isActiveClosed;
end;