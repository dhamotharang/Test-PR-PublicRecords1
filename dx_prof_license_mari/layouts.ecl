IMPORT AID, BIPV2, dx_common;

EXPORT layouts := MODULE

  EXPORT disciplinary_action := RECORD
    STRING8 DATE_FIRST_SEEN;
    STRING8 DATE_LAST_SEEN;
    STRING8 DATE_VENDOR_FIRST_REPORTED;
    STRING8 DATE_VENDOR_LAST_REPORTED;
    STRING8 PROCESS_DATE;
    STRING5 STD_SOURCE_UPD;
    UNSIGNED8 INDIVIDUAL_NMLS_ID;
    STRING500 AUTHORITY_TYPE;
    STRING500 ACTION_TYPE;
    STRING10 ACTION_DTE;
    STRING500 AUTHORITY_NAME;
    STRING ACTION_DETAIL;
    STRING200 URL;
    UNSIGNED8 STATE_ACTION_ID;
    STRING8 CLN_ACTION_DTE;
  END;

  //DF-28229 Add Delta build fields
  EXPORT disciplinary_action_base := RECORD
    Disciplinary_Action;
    dx_common.layout_metadata;
  END;

  EXPORT individual_reg := RECORD
    STRING8 DATE_FIRST_SEEN;
    STRING8 DATE_LAST_SEEN;
    STRING8 DATE_VENDOR_FIRST_REPORTED;
    STRING8 DATE_VENDOR_LAST_REPORTED;
    STRING8 PROCESS_DATE;
    STRING5 STD_SOURCE_UPD;
    STRING1 RECORD_TYPE_IND;
    UNSIGNED8 INDIVIDUAL_NMLS_ID;
    UNSIGNED8 COMPANY_NMLS_ID;
    UNSIGNED8 INSTIT_NMLS_ID;
    STRING60 NAME_REGISTRATION;
    STRING10 REG_STATUS;
    STRING3 is_Authorized_Conduct;
    STRING150 NAME_EMPLOYER;
    STRING150 NAME_COMPANY;
    UNSIGNED8 LICENSE_ID;
    STRING50 RAW_LICENSE_TYPE;
    // STRING10 STD_LICENSE_TYPE;
    STRING50 STD_LICENSE_DESC;
    STRING500 REGULATOR;
    STRING10 START_DTE;
    STRING10 END_DTE;
    STRING8 CLN_START_DTE;
    STRING8 CLN_END_DTE;
  END;

  EXPORT individual_reg_base := RECORD
    individual_reg;
    dx_common.layout_metadata;
  END;

  EXPORT intermediate := RECORD
    UNSIGNED6 MARI_RID;
    UNSIGNED8 PRIMARY_KEY;
    STRING8 CREATE_DTE;
    STRING8 LAST_UPD_DTE;
    STRING8 STAMP_DTE;
    STRING8 DATE_FIRST_SEEN;
    STRING8 DATE_LAST_SEEN;
    STRING8 DATE_VENDOR_FIRST_REPORTED;
    STRING8 DATE_VENDOR_LAST_REPORTED;
    STRING8 PROCESS_DATE;
    STRING10 GEN_NBR;
    STRING3 STD_PROF_CD;
    STRING40 STD_PROF_DESC;
    STRING5 STD_SOURCE_UPD;
    STRING80 STD_SOURCE_DESC;
    STRING2 TYPE_CD;
    STRING10 NAME_ORG_PREFX;
    STRING80 NAME_ORG;
    STRING15 NAME_ORG_SUFX;
    STRING10 STORE_NBR;
    STRING10 NAME_DBA_PREFX;
    STRING80 NAME_DBA;
    STRING15 NAME_DBA_SUFX;
    STRING10 STORE_NBR_DBA;
    UNSIGNED1 DBA_FLAG;
    STRING80 NAME_OFFICE;
    STRING2 OFFICE_PARSE;
    STRING8 NAME_PREFX;
    STRING30 NAME_FIRST;
    STRING30 NAME_MID;
    STRING50 NAME_LAST;
    STRING5 NAME_SUFX;
    STRING15 NAME_NICK;
    STRING8 BIRTH_DTE;
    STRING1 GENDER;
    STRING1 PROV_STAT;
    STRING14 CREDENTIAL;
    STRING30 LICENSE_NBR;
    STRING30 OFF_LICENSE_NBR;
    STRING50 OFF_LICENSE_NBR_TYPE; // Identify OFF_LICENSE_NBR(Officer, Corporation, Broker)
    STRING30 BRKR_LICENSE_NBR; // Broker License, Associated Broker License, Employing Broker's License
    STRING50 BRKR_LICENSE_NBR_TYPE;
    STRING2 LICENSE_STATE;
    STRING100 RAW_LICENSE_TYPE;
    STRING10 STD_LICENSE_TYPE;
    STRING120 STD_LICENSE_DESC;
    STRING75 RAW_LICENSE_STATUS;
    STRING3 STD_LICENSE_STATUS;
    STRING120 STD_STATUS_DESC;
    STRING8 CURR_ISSUE_DTE;
    STRING8 ORIG_ISSUE_DTE;
    STRING8 EXPIRE_DTE;
    STRING8 RENEWAL_DTE;
    STRING6 ACTIVE_FLAG;
    STRING9 SSN_TAXID_1;
    STRING1 TAX_TYPE_1;
    STRING9 SSN_TAXID_2;
    STRING1 TAX_TYPE_2;
    STRING8 FED_RSSD;
    STRING1 ADDR_BUS_IND;
    STRING1 NAME_FORMAT;
    STRING254 NAME_ORG_ORIG;
    STRING254 NAME_DBA_ORIG;
    STRING254 NAME_MARI_ORG; //increased from 80 to 254
    STRING254 NAME_MARI_DBA; //increased from 80 to 254
    STRING15 PHN_MARI_1;
    STRING15 PHN_MARI_FAX_1;
    STRING15 PHN_MARI_2;
    STRING15 PHN_MARI_FAX_2;
    STRING10 ADDR_ID_1;
    STRING50 ADDR_ADDR1_1;
    STRING50 ADDR_ADDR2_1;
    STRING25 ADDR_CITY_1;
    STRING2 ADDR_STATE_1;
    STRING5 ADDR_ZIP5_1;
    STRING4 ADDR_ZIP4_1;
    STRING10 PHN_PHONE_1;
    STRING10 PHN_FAX_1;
    STRING35 ADDR_CNTY_1;
    STRING25 ADDR_CNTRY_1;
    STRING5 SUD_KEY_1;
    UNSIGNED1 OOC_IND_1;
    STRING2 RESULT_CD_1;
    STRING4 ADDR_CARRIER_RTE_1;
    STRING3 ADDR_DELIVERY_PT_1;
    STRING1 ADDR_MAIL_IND;
    STRING10 ADDR_ID_2;
    STRING50 ADDR_ADDR1_2;
    STRING50 ADDR_ADDR2_2;
    STRING25 ADDR_CITY_2;
    STRING2 ADDR_STATE_2;
    STRING5 ADDR_ZIP5_2;
    STRING4 ADDR_ZIP4_2;
    STRING35 ADDR_CNTY_2;
    STRING25 ADDR_CNTRY_2;
    STRING10 PHN_PHONE_2;
    STRING10 PHN_FAX_2;
    STRING5 SUD_KEY_2;
    UNSIGNED OOC_IND_2;
    STRING2 RESULT_CD_2;
    STRING5 ADDR_CARRIER_RTE_2;
    STRING3 ADDR_DELIVERY_PT_2;
    STRING15 LICENSE_NBR_CONTACT;
    STRING8 NAME_CONTACT_PREFX;
    STRING15 NAME_CONTACT_FIRST;
    STRING15 NAME_CONTACT_MID;
    STRING30 NAME_CONTACT_LAST;
    STRING3 NAME_CONTACT_SUFX;
    STRING15 NAME_CONTACT_NICK;
    STRING40 NAME_CONTACT_TTL;
    STRING10 PHN_CONTACT;
    STRING6 PHN_CONTACT_EXT;
    STRING10 PHN_CONTACT_FAX;
    STRING80 EMAIL;
    STRING80 URL;
    STRING7 BK_CLASS;
    STRING75 BK_CLASS_DESC;
    STRING7 CHARTER;
    STRING10 INST_BEG_DTE;
    STRING1 ORIGIN_CD;
    STRING35 ORIGIN_CD_DESC;
    STRING5 DISP_TYPE_CD;
    STRING250 DISP_TYPE_DESC;
    STRING7 REG_AGENT;
    STRING150 REGULATOR; // populated by NMLS
    STRING22 HQTR_CITY;
    STRING95 HQTR_NAME;
    STRING6 DOMESTIC_OFF_NBR;
    STRING5 FOREIGN_OFF_NBR;
    STRING7 HCR_RSSD;
    STRING8 HCR_LOCATION;
    STRING2 AFFIL_TYPE_CD;
    STRING10 GENLINK;
    UNSIGNED1 RESEARCH_IND;
    STRING6 DOCKET_ID;
    UNSIGNED8 REC_KEY;
    UNSIGNED8 MLTRECKEY;
    UNSIGNED8 OLD_CMC_SLPK;
    UNSIGNED8 CMC_SLPK;
    UNSIGNED8 PCMC_SLPK;
    UNSIGNED8 AFFIL_KEY;
    STRING15 MATCH_ID;
    STRING PROVNOTE_1;
    STRING PROVNOTE_2;
    STRING PROVNOTE_3;
    UNSIGNED8 PREV_PRIMARY_KEY;
    UNSIGNED8 PREV_MLTRECKEY;
    UNSIGNED8 PREV_CMC_SLPK;
    UNSIGNED8 PREV_PCMC_SLPK;
    UNSIGNED8 PERSISTENT_RECORD_ID;
    STRING75 ADDL_LICENSE_SPEC;
    STRING50 CONT_EDUCATION_ERND;
    STRING60 CONT_EDUCATION_REQ;
    STRING10 CONT_EDUCATION_TERM;
    STRING30 AGENCY_ID;
    STRING60 SITE_LOCATION;
    STRING50 BUSINESS_TYPE;
    STRING500 DISPLINARY_ACTION;
    STRING8 VIOLATION_DTE;
    STRING50 VIOLATION_CASE_NBR;
    STRING200 VIOLATION_DESC;
    UNSIGNED8 LICENSE_ID; // Populated by NMLS
    UNSIGNED8 NMLS_ID; // Populated by NMLS (COMPANY, BRANCH, INDIVIDUAL)
    UNSIGNED8 FOREIGN_NMLS_ID; // Populated by NMLS (COMPANY, LOCATION)
    STRING6 LOCATION_TYPE; // populated by NMLS
    STRING11 NAME_TYPE; // Populated by NMLS (OTHER, PRIOROTHER,PRIORLEGAL)
    STRING8 START_DTE; // Populated by NMLS
    STRING20 AGENCY_STATUS; // populated by NMLS- Federal Regulator Status
    STRING3 is_Authorized_License; // Populated by NMLS
    STRING3 is_Authorized_Conduct; // Populated by NMLS
    STRING150 FEDERAL_REGULATOR; // Populated by NMLS
    //BIP Section
    BIPV2.IDlayouts.l_xlink_ids;
    //DF-28229 Add Delta build fields
    dx_common.layout_metadata;
  END;
      
  EXPORT clean := RECORD
    intermediate;
    UNSIGNED6 DID := 0;
    UNSIGNED6 BDID := 0;
    STRING5 TITLE;
    STRING20 FNAME;
    STRING20 MNAME;
    STRING20 LNAME;
    STRING5 NAME_SUFFIX;
    STRING254 NAME_COMPANY;
    STRING254 NAME_COMPANY_DBA;
    STRING100 Append_BusAddrFirst;
    STRING50 Append_BusAddrLast;
    AID.Common.xAID Append_BusRawAID;
    AID.Common.xAID Append_BusAceAID;
    STRING100 Append_MailAddrFirst;
    STRING50 Append_MailAddrLast;
    AID.Common.xAID Append_MailRawAID;
    AID.Common.xAID Append_MailAceAID;
  END;
    
  EXPORT mari_full := RECORD
    clean - dx_common.layout_metadata;
    STRING10 BUS_PRIM_RANGE;
    STRING2 BUS_PREDIR;
    STRING28 BUS_PRIM_NAME;
    STRING4 BUS_ADDR_SUFFIX;
    STRING2 BUS_POSTDIR;
    STRING10 BUS_UNIT_DESIG;
    STRING8 BUS_SEC_RANGE;
    STRING30 BUS_P_CITY_NAME; // increase LENGTH to accommodate Canadian City
    STRING25 BUS_V_CITY_NAME;
    STRING2 BUS_STATE;
    STRING6 BUS_ZIP5; // increase LENGTH to accommodate Canadian Zip
    STRING4 BUS_ZIP4;
    STRING4 BUS_CART;
    STRING1 BUS_CR_SORT_SZ;
    STRING4 BUS_LOT;
    STRING1 BUS_LOT_ORDER;
    STRING2 BUS_DPBC;
    STRING1 BUS_CHK_DIGIT;
    STRING2 BUS_REC_TYPE;
    STRING2 BUS_ACE_FIPS_ST;
    STRING3 BUS_COUNTY;
    STRING10 BUS_GEO_LAT;
    STRING11 BUS_GEO_LONG;
    STRING4 BUS_MSA;
    STRING7 BUS_GEO_BLK;
    STRING1 BUS_GEO_MATCH;
    STRING5 BUS_ERR_STAT; // increase LENGTH to accommodate Canadian err_stat
    STRING10 MAIL_PRIM_RANGE;
    STRING2 MAIL_PREDIR;
    STRING28 MAIL_PRIM_NAME;
    STRING4 MAIL_ADDR_SUFFIX;
    STRING2 MAIL_POSTDIR;
    STRING10 MAIL_UNIT_DESIG;
    STRING8 MAIL_SEC_RANGE;
    STRING30 MAIL_P_CITY_NAME; // increase LENGTH to accommodate Canadian City
    STRING25 MAIL_V_CITY_NAME;
    STRING2 MAIL_STATE;
    STRING6 MAIL_ZIP5; // increase LENGTH to accommodate Canadian Zip
    STRING4 MAIL_ZIP4;
    STRING4 MAIL_CART;
    STRING1 MAIL_CR_SORT_SZ;
    STRING4 MAIL_LOT;
    STRING1 MAIL_LOT_ORDER;
    STRING2 MAIL_DPBC;
    STRING1 MAIL_CHK_DIGIT;
    STRING2 MAIL_REC_TYPE;
    STRING2 MAIL_ACE_FIPS_ST;
    STRING3 MAIL_COUNTY;
    STRING10 MAIL_GEO_LAT;
    STRING11 MAIL_GEO_LONG;
    STRING4 MAIL_MSA;
    STRING7 MAIL_GEO_BLK;
    STRING1 MAIL_GEO_MATCH;
    STRING5 MAIL_ERR_STAT; // increase LENGTH to accommodate Canadian err_stat
    STRING30 CLN_LICENSE_NBR;
    STRING1 enh_did_src:=''; //Ehanced did source; M for Mari, S for SANCTN, N for SANCTN Non-public
    //DF-28229 Add Delta build fields
    dx_common.layout_metadata;
  END;

  EXPORT mari_final := RECORD
    mari_full - [enh_did_src];
  END;

  EXPORT regulatory_action := RECORD
    STRING8 DATE_FIRST_SEEN; 
    STRING8 DATE_LAST_SEEN; 
    STRING8 DATE_VENDOR_FIRST_REPORTED; 
    STRING8 DATE_VENDOR_LAST_REPORTED;
    STRING8 PROCESS_DATE; 
    STRING5 STD_SOURCE_UPD; 
    UNSIGNED8 STATE_ACTION_ID;
    UNSIGNED8 NMLS_ID;
    STRING2 AFFIL_TYPE_CD;                 
    STRING500 REGULATOR;
    STRING70 ACTION_TYPE;
    STRING10 ACTION_DTE;
    STRING20 MULTI_STATE_ID;
    STRING40 DOCKET_NBR;
    STRING100 URL;
    STRING8 CLN_ACTION_DTE;
  END;

  //DF-28229 Add Delta build fields
  EXPORT regulatory_action_base := RECORD	
    regulatory_action;
    dx_common.layout_metadata;						
  END;

  EXPORT i_disciplinary_actions := RECORD, MAXLENGTH(8000)
    disciplinary_action_base;
  END;

  EXPORT i_individual_detail := RECORD
    individual_reg_base;
  END;

  EXPORT i_license_number := RECORD
    mari_final;
  END;

  EXPORT i_link_ids := RECORD
    mari_final;
  END;

  EXPORT i_nmls_id := RECORD
    mari_final;
  END;

  EXPORT i_regulatory_actions := RECORD
    regulatory_action_base;
  END;

  EXPORT i_did := RECORD
    UNSIGNED6 s_did;
    mari_final;
  END;

  EXPORT i_bdid := RECORD
    mari_final;
  END;

  EXPORT i_ssn_taxid := RECORD
    UNSIGNED6 mari_rid;
    STRING2 tax_type;
    STRING9 ssn_taxid;
    UNSIGNED8 MLTRECKEY;
    UNSIGNED8 CMC_SLPK;
    UNSIGNED8 PCMC_SLPK;
  END;

  EXPORT i_mari_payload := RECORD
    mari_final;
  END;

  EXPORT i_autokey_payload := RECORD
    UNSIGNED6 fakeid;
    UNSIGNED6 mari_rid;
    STRING19 create_dte;
    STRING19 last_upd_dte;
    STRING19 stamp_dte;
    STRING8 date_first_seen;
    STRING8 date_last_seen;
    STRING8 date_vendor_first_reported;
    STRING8 date_vendor_last_reported;
    UNSIGNED6 did;
    UNSIGNED6 bdid;
    STRING3 std_prof_cd;
    STRING5 std_source_upd;
    STRING2 type_cd;
    STRING5 title;
    STRING20 fname;
    STRING20 mname;
    STRING20 lname;
    STRING5 name_suffix;
    STRING1 addr_ind;
    STRING10 prim_range;
    STRING2 predir;
    STRING28 prim_name;
    STRING4 addr_suffix;
    STRING2 postdir;
    STRING10 unit_desig;
    STRING8 sec_range;
    STRING30 p_city_name;
    STRING25 city_name;
    STRING2 st;
    STRING6 zip5;
    STRING4 zip4;
    STRING254 company;
    STRING1 tax_type;
    STRING9 ssn_taxid;
    STRING8 party_birth;
    STRING10 party_phone;
    STRING30 license_nbr;
    STRING30 off_license_nbr;
    STRING30 brkr_license_nbr;
    STRING2 license_state;
    UNSIGNED8 mltreckey;
    UNSIGNED8 cmc_slpk;
    UNSIGNED8 pcmc_slpk;
    UNSIGNED8 persistent_record_id;
    STRING30 cln_license_nbr;
    UNSIGNED8 license_id;
    UNSIGNED8 nmls_id;
    UNSIGNED8 foreign_nmls_id;
    STRING150 regulator;
    STRING150 federal_regulator;
    dx_common.layout_metadata;
  END;

END;
