/* 
 * toLayoutModeling: This function takes in the flat attribute results
 * and converts it into a layout that the modelers can use other than ESDL.
 */

EXPORT toLayoutModeling (DATASET(Address_Shell.layoutPropertyCharacteristics) results) := FUNCTION
	Address_Shell.layoutModeling intoModeling(Address_Shell.layoutPropertyCharacteristics le) := TRANSFORM
		SELF.InputEcho :=	le.Input;
		
		SELF.Address_Based_Public_Record.address_vacancy_indicator	:= le.PropertyAttributes.Version1.Address_Vacancy_Indicator;
		SELF.Address_Based_Public_Record.automated_valuation	:= le.PropertyAttributes.Version1.Property_Automated_Valuation;
		SELF.Address_Based_Public_Record.career_ff	:= le.PropertyAttributes.Version1.Career_Firefighter;
		SELF.Address_Based_Public_Record.dist_to_fd	:= le.PropertyAttributes.Version1.Distance_To_Fire_Department;
		SELF.Address_Based_Public_Record.fc_recording_date	:= le.PropertyAttributes.Version1.Foreclosure_Recording_Date;
		SELF.Address_Based_Public_Record.Foreclosures	:= le.PropertyAttributes.Version1.Foreclosure_Count;
		SELF.Address_Based_Public_Record.lowinc	:= le.PropertyAttributes.Version1.Low_Income;
		SELF.Address_Based_Public_Record.mobility_index	:= le.PropertyAttributes.Version1.Mobility_Index;
		SELF.Address_Based_Public_Record.poverty_index	:= le.PropertyAttributes.Version1.Poverty_Index;
		SELF.Address_Based_Public_Record.property_owned_assessed_total	:= le.PropertyAttributes.Version1.Property_Owned_Assessed_Total;
		SELF.Address_Based_Public_Record.property_owned_purchase_total	:= le.PropertyAttributes.Version1.Property_Owned_Purchase_Total;
		SELF.Address_Based_Public_Record.purchase_amount	:= le.PropertyAttributes.Version1.Property_Purchase_Amount;
		SELF.Address_Based_Public_Record.risk_index	:= le.PropertyAttributes.Version1.Risk_Index;
		SELF.Address_Based_Public_Record.state	:= le.PropertyAttributes.Version1.State;
		SELF.Address_Based_Public_Record.tax_assessment_valuation	:= le.PropertyAttributes.Version1.Property_Tax_Assessment_Valuation;
		SELF.Address_Based_Public_Record.volunteer_ff	:= le.PropertyAttributes.Version1.Volunteer_Firefighter;

		SELF.Property_Information.Street_Number	:= le.PropertyCharacteristics.Address.Street_Number;
		SELF.Property_Information.Street_Pre_Direction	:= le.PropertyCharacteristics.Address.Street_Pre_Direction;
		SELF.Property_Information.Street_Name	:= le.PropertyCharacteristics.Address.Street_Name;
		SELF.Property_Information.Street_Suffix	:= le.PropertyCharacteristics.Address.Street_Suffix;
		SELF.Property_Information.Street_Post_Direction	:= le.PropertyCharacteristics.Address.Street_Post_Direction;
		SELF.Property_Information.Unit_Designation	:= le.PropertyCharacteristics.Address.Unit_Designation;
		SELF.Property_Information.Unit_Number	:= le.PropertyCharacteristics.Address.Unit_Number;
		SELF.Property_Information.Street_Address_1	:= le.PropertyCharacteristics.Address.Street_Address_1;
		SELF.Property_Information.Street_Address_2	:= le.PropertyCharacteristics.Address.Street_Address_2;
		SELF.Property_Information.City	:= le.PropertyCharacteristics.Address.City;
		SELF.Property_Information.State	:= le.PropertyCharacteristics.Address.State;
		SELF.Property_Information.Zip_5	:= le.PropertyCharacteristics.Address.Zip_5;
		SELF.Property_Information.Zip_4	:= le.PropertyCharacteristics.Address.Zip_4;
		SELF.Property_Information.County	:= le.PropertyCharacteristics.Address.County;
		SELF.Property_Information.Postal_Code	:= le.PropertyCharacteristics.Address.Postal_Code;
		SELF.Property_Information.State_City_Zip	:= le.PropertyCharacteristics.Address.State_City_Zip;
		SELF.Property_Information.Census_Tract	:= le.PropertyCharacteristics.Address.Census_Tract;
		SELF.Property_Information.Living_Area_SF	:= le.PropertyCharacteristics.Attributes.Living_Area_SF;
		SELF.Property_Information.Stories	:= le.PropertyCharacteristics.Attributes.Stories;
		SELF.Property_Information.Bedrooms	:= le.PropertyCharacteristics.Attributes.Bedrooms;
		SELF.Property_Information.Baths	:= le.PropertyCharacteristics.Attributes.Baths;
		SELF.Property_Information.Fireplaces	:= le.PropertyCharacteristics.Attributes.Fireplaces;
		SELF.Property_Information.Pool	:= le.PropertyCharacteristics.Attributes.Pool;
		SELF.Property_Information.AC	:= le.PropertyCharacteristics.Attributes.AC;
		SELF.Property_Information.Year_Built	:= le.PropertyCharacteristics.Attributes.Year_Built;
		SELF.Property_Information.Slope	:= le.PropertyCharacteristics.Attributes.Slope;
		SELF.Property_Information.Quality_Of_Struct	:= le.PropertyCharacteristics.Attributes.Quality_Of_Struct;
		SELF.Property_Information.Replacement_Cost_Report_Id	:= le.PropertyCharacteristics.Attributes.Replacement_Cost_Report_Id;
		SELF.Property_Information.Policy_Coverage_Value	:= le.PropertyCharacteristics.Attributes.Policy_Coverage_Value;
		SELF.Property_Information.Fireplace_Indicator	:= le.PropertyCharacteristics.Attributes.Fireplace_Indicator;
		SELF.Property_Information.Units	:= le.PropertyCharacteristics.Attributes.Units;
		SELF.Property_Information.Rooms	:= le.PropertyCharacteristics.Attributes.Rooms;
		SELF.Property_Information.Full_Baths	:= le.PropertyCharacteristics.Attributes.Full_Baths;
		SELF.Property_Information.Half_Baths	:= le.PropertyCharacteristics.Attributes.Half_Baths;
		SELF.Property_Information.Bath_Fixtures	:= le.PropertyCharacteristics.Attributes.Bath_Fixtures;
		SELF.Property_Information.Effective_Year_Built	:= le.PropertyCharacteristics.Attributes.Effective_Year_Built;
		SELF.Property_Information.Condition_Of_Structure	:= le.PropertyCharacteristics.Attributes.Condition_Of_Structure;
		SELF.Property_Information.Building_Area_SF	:= le.PropertyCharacteristics.Attributes.Building_Area_SF;
		SELF.Property_Information.Ground_Floor_Area_SF	:= le.PropertyCharacteristics.Attributes.Ground_Floor_Area_SF;
		SELF.Property_Information.Basement_Area_SF	:= le.PropertyCharacteristics.Attributes.Basement_Area_SF;
		SELF.Property_Information.Garage_Area_SF	:= le.PropertyCharacteristics.Attributes.Garage_Area_SF;
		SELF.Property_Information.Type_Of_Residence	:= le.PropertyCharacteristics.Attributes.Type_Of_Residence;
		SELF.Property_Information.Flood_Zone_Panel_Number	:= le.PropertyCharacteristics.Attributes.Flood_Zone_Panel_Number;
		SELF.Property_Information.Stories_Type	:= le.PropertyCharacteristics.Attributes.Stories_Type;
		SELF.Property_Information.Air_Conditioning_Material	:= le.PropertyCharacteristics.Characteristics.Air_Conditioning_Material;
		SELF.Property_Information.Air_Conditioning_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Air_Conditioning_Material_Desc;
		SELF.Property_Information.Walls_and_Ceilings_Material	:= le.PropertyCharacteristics.Characteristics.Walls_and_Ceilings_Material;
		SELF.Property_Information.Walls_and_Ceilings_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Walls_and_Ceilings_Material_Desc;
		SELF.Property_Information.Flooring_Material	:= le.PropertyCharacteristics.Characteristics.Flooring_Material;
		SELF.Property_Information.Flooring_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Flooring_Material_Desc;
		SELF.Property_Information.Appliances_Material	:= le.PropertyCharacteristics.Characteristics.Appliances_Material;
		SELF.Property_Information.Appliances_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Appliances_Material_Desc;
		SELF.Property_Information.Exterior_Wall_Material	:= le.PropertyCharacteristics.Characteristics.Exterior_Wall_Material;
		SELF.Property_Information.Exterior_Wall_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Exterior_Wall_Material_Desc;
		SELF.Property_Information.Roofing_Material	:= le.PropertyCharacteristics.Characteristics.Roofing_Material;
		SELF.Property_Information.Roofing_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Roofing_Material_Desc;
		SELF.Property_Information.Foundation_Material	:= le.PropertyCharacteristics.Characteristics.Foundation_Material;
		SELF.Property_Information.Foundation_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Foundation_Material_Desc;
		SELF.Property_Information.Fireplace_Material	:= le.PropertyCharacteristics.Characteristics.Fireplace_Material;
		SELF.Property_Information.Fireplace_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Fireplace_Material_Desc;
		SELF.Property_Information.Balcony_Material	:= le.PropertyCharacteristics.Characteristics.Balcony_Material;
		SELF.Property_Information.Balcony_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Balcony_Material_Desc;
		SELF.Property_Information.Decks_and_Patios_Material	:= le.PropertyCharacteristics.Characteristics.Decks_and_Patios_Material;
		SELF.Property_Information.Decks_and_Patios_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Decks_and_Patios_Material_Desc;
		SELF.Property_Information.Porch_Material	:= le.PropertyCharacteristics.Characteristics.Porch_Material;
		SELF.Property_Information.Porch_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Porch_Material_Desc;
		SELF.Property_Information.Parking_Material	:= le.PropertyCharacteristics.Characteristics.Parking_Material;
		SELF.Property_Information.Parking_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Parking_Material_Desc;
		SELF.Property_Information.Basement_Material	:= le.PropertyCharacteristics.Characteristics.Basement_Material;
		SELF.Property_Information.Basement_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Basement_Material_Desc;
		SELF.Property_Information.Kitchen_Material	:= le.PropertyCharacteristics.Characteristics.Kitchen_Material;
		SELF.Property_Information.Kitchen_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Kitchen_Material_Desc;
		SELF.Property_Information.Bathroom_Material	:= le.PropertyCharacteristics.Characteristics.Bathroom_Material;
		SELF.Property_Information.Bathroom_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Bathroom_Material_Desc;
		SELF.Property_Information.Water_Material	:= le.PropertyCharacteristics.Characteristics.Water_Material;
		SELF.Property_Information.Water_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Water_Material_Desc;
		SELF.Property_Information.Basecost_Material	:= le.PropertyCharacteristics.Characteristics.Basecost_Material;
		SELF.Property_Information.Basecost_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Basecost_Material_Desc;
		SELF.Property_Information.Plumbing_Material	:= le.PropertyCharacteristics.Characteristics.Plumbing_Material;
		SELF.Property_Information.Plumbing_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Plumbing_Material_Desc;
		SELF.Property_Information.Style_Material	:= le.PropertyCharacteristics.Characteristics.Style_Material;
		SELF.Property_Information.Style_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Style_Material_Desc;
		SELF.Property_Information.Fuel_Material	:= le.PropertyCharacteristics.Characteristics.Fuel_Material;
		SELF.Property_Information.Fuel_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Fuel_Material_Desc;
		SELF.Property_Information.Garage_Material	:= le.PropertyCharacteristics.Characteristics.Garage_Material;
		SELF.Property_Information.Garage_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Garage_Material_Desc;
		SELF.Property_Information.Construction_Type_Material	:= le.PropertyCharacteristics.Characteristics.Construction_Type_Material;
		SELF.Property_Information.Construction_Type_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Construction_Type_Material_Desc;
		SELF.Property_Information.Heating_Material	:= le.PropertyCharacteristics.Characteristics.Heating_Material;
		SELF.Property_Information.Heating_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Heating_Material_Desc;
		SELF.Property_Information.Frame_Material	:= le.PropertyCharacteristics.Characteristics.Frame_Material;
		SELF.Property_Information.Frame_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Frame_Material_Desc;
		SELF.Property_Information.Sewer_Material	:= le.PropertyCharacteristics.Characteristics.Sewer_Material;
		SELF.Property_Information.Sewer_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Sewer_Material_Desc;
		SELF.Property_Information.Pool_Material	:= le.PropertyCharacteristics.Characteristics.Pool_Material;
		SELF.Property_Information.Pool_Material_Desc	:= le.PropertyCharacteristics.Characteristics.Pool_Material_Desc;
		SELF.Property_Information.Mortgage_Company_Name	:= le.PropertyCharacteristics.Mortgages.Mortgage_Company_Name;
		SELF.Property_Information.Mortgage_Type	:= le.PropertyCharacteristics.Mortgages.Mortgage_Type;
		SELF.Property_Information.Mortgage_Type_Desc	:= le.PropertyCharacteristics.Mortgages.Mortgage_Type_Desc;
		SELF.Property_Information.Loan_Amount	:= le.PropertyCharacteristics.Mortgages.Loan_Amount;
		SELF.Property_Information.Loan_Type_Code	:= le.PropertyCharacteristics.Mortgages.Loan_Type_Code;
		SELF.Property_Information.Loan_Type	:= le.PropertyCharacteristics.Mortgages.Loan_Type;
		SELF.Property_Information.Interest_Rate	:= le.PropertyCharacteristics.Mortgages.Interest_Rate;
		SELF.Property_Information.Deed_Recording_Date	:= le.PropertyCharacteristics.Sales.Deed_Recording_Date;
		SELF.Property_Information.Sales_Date	:= le.PropertyCharacteristics.Sales.Sales_Date;
		SELF.Property_Information.Deed_Document_Number	:= le.PropertyCharacteristics.Sales.Deed_Document_Number;
		SELF.Property_Information.Sales_Amount	:= le.PropertyCharacteristics.Sales.Sales_Amount;
		SELF.Property_Information.Sales_Type	:= le.PropertyCharacteristics.Sales.Sales_Type;
		SELF.Property_Information.Land_Use_Code	:= le.PropertyCharacteristics.Taxes.Land_Use_Code;
		SELF.Property_Information.Land_Use	:= le.PropertyCharacteristics.Taxes.Land_Use;
		SELF.Property_Information.Property_Type_Code	:= le.PropertyCharacteristics.Taxes.Property_Type_Code;
		SELF.Property_Information.Property_Type	:= le.PropertyCharacteristics.Taxes.Property_Type;
		SELF.Property_Information.Lot_Size	:= le.PropertyCharacteristics.Taxes.Lot_Size;
		SELF.Property_Information.Lot_Front_Footage	:= le.PropertyCharacteristics.Taxes.Lot_Front_Footage;
		SELF.Property_Information.Lot_Depth_Footage	:= le.PropertyCharacteristics.Taxes.Lot_Depth_Footage;
		SELF.Property_Information.Acres	:= le.PropertyCharacteristics.Taxes.Acres;
		SELF.Property_Information.Total_Assessed_Value	:= le.PropertyCharacteristics.Taxes.Total_Assessed_Value;
		SELF.Property_Information.Total_Calculated_Value	:= le.PropertyCharacteristics.Taxes.Total_Calculated_Value;
		SELF.Property_Information.Total_Market_Value	:= le.PropertyCharacteristics.Taxes.Total_Market_Value;
		SELF.Property_Information.Total_Land_Value	:= le.PropertyCharacteristics.Taxes.Total_Land_Value;
		SELF.Property_Information.Market_Land_Value	:= le.PropertyCharacteristics.Taxes.Market_Land_Value;
		SELF.Property_Information.Assessed_Land_Value	:= le.PropertyCharacteristics.Taxes.Assessed_Land_Value;
		SELF.Property_Information.Improvement_Value	:= le.PropertyCharacteristics.Taxes.Improvement_Value;
		SELF.Property_Information.Assessed_Year	:= le.PropertyCharacteristics.Taxes.Assessed_Year;
		SELF.Property_Information.Tax_Code_Area	:= le.PropertyCharacteristics.Taxes.Tax_Code_Area;
		SELF.Property_Information.Tax_Billing_Year	:= le.PropertyCharacteristics.Taxes.Tax_Billing_Year;
		SELF.Property_Information.Home_Stead_Exemption	:= le.PropertyCharacteristics.Taxes.Home_Stead_Exemption;
		SELF.Property_Information.Tax_Amount	:= le.PropertyCharacteristics.Taxes.Tax_Amount;
		SELF.Property_Information.Percent_Improved	:= le.PropertyCharacteristics.Taxes.Percent_Improved;
		SELF.Property_Information.Assessment_Recording_Date	:= le.PropertyCharacteristics.Taxes.Assessment_Recording_Date;
		
		SELF := le;
		SELF := [];
	END;
	
	result := PROJECT(results, intoModeling(LEFT));
	
	RETURN(result);
END;