EXPORT service_test_format := MACRO
  tempds := CHOOSEN(liensv2.key_search_DID,200);
  tempds2 := CHOOSEN(liensv2.key_search_bdid,200);
  liensv2_services.layout_lien_party_raw xf_temp(tempds l) := TRANSFORM
    SELF.tmsid := l.tmsid;
    SELF.did := l.did;
    SELF.bdid := l.bdid;
    SELF.tax_id := l.debtor_tax_id;
    SELF.ssn := l.debtor_ssn;
    SELF.title := l.clean_debtor_title;
    SELF.fname := l.clean_debtor_fname;
    SELF.mname := l.clean_debtor_mname;
    SELF.lname := l.clean_debtor_lname;
    SELF.name_suffix := l.clean_debtor_name_suffix;
    SELF.name_score := l.clean_debtor_score;
    SELF.cname := l.clean_debtor_cname;
    SELF.prim_range := l.clean_debtor_prim_range;
    SELF.predir := l.clean_debtor_predir ;
    SELF.prim_name := l.clean_debtor_prim_name;
    SELF.addr_suffix := l.clean_debtor_addr_suffix;
    SELF.postdir := l.clean_debtor_postdir;
    SELF.unit_Desig := l.clean_debtor_unit_Desig;
    SELF.sec_range := l.clean_debtor_sec_range;
    SELF.p_city_name := l.clean_debtor_p_city_name;
    SELF.v_city_name := l.clean_debtor_v_city_name;
    SELF.st := l.clean_debtor_st;
    SELF.zip := l.clean_debtor_zip;
    SELF.zip4 := l.clean_debtor_zip4;
    SELF.cart := l.clean_debtor_cart;
    SELF.cr_sort_sz := l.clean_debtor_cr_sort_sz;
    SELF.lot := l.clean_debtor_lot;
    SELF.lot_order := l.clean_debtor_lot_order;
    SELF.dbpc := l.clean_debtor_dpbc;
    SELF.chk_digit := l.clean_debtor_chk_digit;
    SELF.rec_type := l.clean_debtor_record_type;
    SELF.county := l.clean_debtor_ace_fips_st + l.clean_debtor_fipscounty;
    SELF.geo_lat := l.clean_debtor_geo_lat;
    SELF.geo_long := l.clean_debtor_geo_long;
    SELF.msa := l.clean_debtor_msa;
    SELF.geo_blk := '';
    SELF.geo_match := l.clean_debtor_geo_match;
    SELF.err_stat := l.clean_debtor_err_stat;
  END;
  liensv2_services.layout_lien_party_raw xf_temp2(tempds2 l) := TRANSFORM
    SELF.tmsid := l.tmsid;
    SELF.did := l.did;
    SELF.bdid := l.bdid;
    SELF.tax_id := l.debtor_tax_id;
    SELF.ssn := l.debtor_ssn;
    SELF.title := l.clean_debtor_title;
    SELF.fname := l.clean_debtor_fname;
    SELF.mname := l.clean_debtor_mname;
    SELF.lname := l.clean_debtor_lname;
    SELF.name_suffix := l.clean_debtor_name_suffix;
    SELF.name_score := l.clean_debtor_score;
    SELF.cname := l.clean_debtor_cname;
    SELF.prim_range := l.clean_debtor_prim_range;
    SELF.predir := l.clean_debtor_predir ;
    SELF.prim_name := l.clean_debtor_prim_name;
    SELF.addr_suffix := l.clean_debtor_addr_suffix;
    SELF.postdir := l.clean_debtor_postdir;
    SELF.unit_Desig := l.clean_debtor_unit_Desig;
    SELF.sec_range := l.clean_debtor_sec_range;
    SELF.p_city_name := l.clean_debtor_p_city_name;
    SELF.v_city_name := l.clean_debtor_v_city_name;
    SELF.st := l.clean_debtor_st;
    SELF.zip := l.clean_debtor_zip;
    SELF.zip4 := l.clean_debtor_zip4;
    SELF.cart := l.clean_debtor_cart;
    SELF.cr_sort_sz := l.clean_debtor_cr_sort_sz;
    SELF.lot := l.clean_debtor_lot;
    SELF.lot_order := l.clean_debtor_lot_order;
    SELF.dbpc := l.clean_debtor_dpbc;
    SELF.chk_digit := l.clean_debtor_chk_digit;
    SELF.rec_type := l.clean_debtor_record_type;
    SELF.county := l.clean_debtor_ace_fips_st + l.clean_debtor_fipscounty;
    SELF.geo_lat := l.clean_debtor_geo_lat;
    SELF.geo_long := l.clean_debtor_geo_long;
    SELF.msa := l.clean_debtor_msa;
    SELF.geo_blk := '';
    SELF.geo_match := l.clean_debtor_geo_match;
    SELF.err_stat := l.clean_debtor_err_stat;
  END;
  temptbl := PROJECT(tempds,xf_temp(LEFT));
  temptbl2 := PROJECT(tempds2,xf_temp2(LEFT));
  tempout := temptbl(fname<>'' OR mname<>'' OR lname<>'' OR name_suffix<>'' OR title<>'') + temptbl2(cname<>'');
  tempres := liensv2_services.fn_format_parties(tempout);
  OUTPUT(CHOOSEN(tempout,500));
  OUTPUT(CHOOSEN(tempres,500));
ENDMACRO;
